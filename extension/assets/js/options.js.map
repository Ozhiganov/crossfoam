{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@crossfoam/data/src/index.ts","webpack:///./node_modules/@crossfoam/service-twitter/config.js","webpack:///./node_modules/@crossfoam/service-twitter/src/index.ts","webpack:///./node_modules/@crossfoam/services/src/index.ts","webpack:///./node_modules/@crossfoam/utils/src/index.ts","webpack:///./src/typescript/options.ts"],"names":[],"mappings":"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","file":"options.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/typescript/options.ts\");\n","import { objEmpty } from \"@crossfoam/utils\";\n\nconst get = (key: string, defaultValue?: any): Promise<any> => {\n\n  return browser.storage.local.get(key)\n    .then( (data: object) => {\n      if (data && data !== null && data !== undefined && !objEmpty(data)) {\n        if (key in data) {\n          return data[key];\n        }\n        return data;\n      } else if (defaultValue) {\n        return set(key, defaultValue);\n      } else {\n        return null;\n      }\n    });\n\n};\n\nconst set = (key: string, value: any): Promise<any> => {\n  return browser.storage.local.set({[key]: value})\n    .then(() => {\n      if (key in value) {\n        return value[key];\n      }\n      return value;\n    });\n};\n\nconst remove = (key: string): Promise<any> => {\n  return browser.storage.local.remove(key);\n};\n\nexport {get, remove, set};\n","export default\n{\n  \"api_key\": \"kePD9gflNGY9JgDgvObYkZqI4\",\n  \"api_secret\": \"gNbCOEvQpfOX8s3toKJUZLGzyDwttsl0yuki43NeCNZiokT5Y5\",\n  \"auth\": true,\n  \"service_name\": \"Twitter\",\n  \"service_key\": \"twitter\",\n  \"queue_functions\":[\n    {\"name\": \"getUser\", \"paramCount\": [1, 1], \"skip\": false, \"passDown\": true, \"timeout\": 60000},\n    {\"name\": \"getUsers\", \"paramCount\": [2, 2], \"skip\": true, \"passDown\": true, \"timeout\": 1000},\n    {\"name\": \"getFriendsIds\", \"paramCount\": [5,5], \"skip\": true, \"passDown\": true, \"timeout\": 60000},\n    {\"name\": \"getFriends\", \"paramCount\": [5,5], \"skip\": true, \"passDown\": true, \"timeout\": 60000}\n  ],\n  \"regex\":/http[s]*:\\/\\/[wwww.]*twitter\\.com\\/((?!(settings|hashtag|hashtags|explore|notifications|messages|home|compose|search|tos))[^\\/]{3,})/\n}","// import Codebird from \"codebird\";\ndeclare function Codebird(): void;\n\nimport * as cfData from \"@crossfoam/data\";\nimport config from \"../config.js\";\n\n// Allow content_scripts to include the services module without codebird\nlet cb;\nif (typeof Codebird === \"function\") {\n  cb = new Codebird();\n  cb.setUseProxy(false);\n  cb.setConsumerKey(config.api_key, config.api_secret);\n}\n\nconst requestTokenKey = \"twitter--request-token\";\nconst authTokenKey = \"twitter--auth-token\";\n\nconst authRequired = (): Promise<boolean> => {\n  return cfData.get(authTokenKey)\n    .then((value) => {\n      if (value && value !== undefined && (\"oauth_token\" in value)) {\n        return testAuth(value);\n      } else {\n        return true;\n      }\n    });\n};\n\nconst testAuth = (data: any): Promise<boolean> => {\n  cb.setToken(data.oauth_token, data.oauth_token_secret);\n  return cb.__call(\n    \"account_verifyCredentials\",\n    {},\n  ).then((result) => {\n    // TODO: I guess, this can also return invalid credential info, needs handling of result\n    return false;\n  });\n};\n\nconst createOptions = (htmlContainer: HTMLElement) => {\n  authRequired()\n    .then((required) => {\n      if (required) {\n        htmlContainer.innerHTML = \"<button id='twitter--auth-button'>Authorize Twitter</button>\";\n        document.getElementById(\"twitter--auth-button\")\n          .addEventListener(\"click\", () => {\n            auth(htmlContainer);\n          });\n      } else {\n        htmlContainer.innerHTML = \"Twitter is authorized and ready to go.\";\n      }\n    })\n    .catch((err) => {\n      throw err;\n    });\n};\n\nconst cbCall = (endpoint: string, params: {}): Promise<any> => {\n  // TODO: Check if authentication is still valid, otherwise throw error\n\n  return cfData.get(authTokenKey)\n    .then((data) => {\n      cb.setToken(data.oauth_token, data.oauth_token_secret);\n      return cb.__call(endpoint, params);\n    });\n};\n\nconst cbErrorHandling = (result: any): string => {\n\n  if (\n    (\"errors\" in result.reply && result.reply.errors.length >= 1)\n    || \"error\" in result.reply\n  ) {\n\n    if ((\"errors\" in result.reply && result.reply.errors[0].message === \"Not authorized.\")\n       || result.reply.httpstatus === 401\n       || (\"error\" in result.reply && result.reply.error === \"Not authorized.\")) {\n\n      // TODO: Handle losing authorization\n      let isAuthRequired = false;\n\n      (async () => {\n        isAuthRequired = await authRequired();\n      })();\n\n      if (isAuthRequired) {\n        console.log(\"not authorized\");\n        return \"auth\";\n      } else {\n        return \"again\";\n      }\n\n    } else if (\"errors\" in result.reply && result.reply.errors[0].code === 88) {\n\n      return \"again\";\n\n    } else {\n\n      throw new Error(JSON.stringify(result));\n      return \"again\";\n\n    }\n  } else if (result.reply.httpstatus === 0) {\n\n    return \"again\";\n\n  } else {\n\n    return \"good\";\n\n  }\n\n};\n\n/*\n * The auth function handles the authentication, if required\n * If any interaction between the options page the authentication is required\n * the html_container element is a div, allowing the modul to embed interactions\n * The data object gives access to the data storage functionalities\n */\n\nconst auth = (htmlContainer: HTMLElement): Promise<boolean> => {\n  return cb.__call(\n    \"oauth_requestToken\",\n    {oauth_callback: \"oob\"},\n  )\n  .then((reply) => {\n    return cfData.set(requestTokenKey, reply.reply);\n  })\n  .then( (requestToken) => {\n    cb.setToken(requestToken.oauth_token, requestToken.oauth_token_secret);\n    return cb.__call(\n      \"oauth_authorize\",\n      {},\n    );\n  })\n  .then((authUrl) => {\n    return browser.tabs.create({url: authUrl.reply});\n  })\n  .then(() => {\n    // Modify the html add a click listener with connection to new function\n    htmlContainer.innerHTML = \"<input \\\n                type='text' \\\n                placeholder='Twitter PIN' \\\n                id='twitter--auth-pin' />\\\n              <button \\\n                id='twitter--auth-button'>\\\n                Finish authorization\\\n              </button>\";\n    document.getElementById(\"twitter--auth-button\")\n      .addEventListener(\"click\", () => {\n        const value = (document.getElementById(\"twitter--auth-pin\") as HTMLInputElement).value;\n        if (value && value.length === 7) {\n          auth2(htmlContainer, value);\n        } else {\n          alert(\"Please input a valid 7-digit Twitter-Auth-Pin.\");\n        }\n      });\n  });\n};\n\nconst auth2 = (htmlContainer: HTMLElement, pin: string) => {\n  return cb.__call(\n    \"oauth_accessToken\",\n    {oauth_verifier: pin},\n  ).then((reply) => {\n    cfData.set(authTokenKey, reply.reply);\n    htmlContainer.innerHTML = \"Twitter is authorized and ready to go.\";\n  });\n};\n\nconst getBiggerPicture = (url: string): string => {\n  const search = \"normal\";\n  const replace = \"bigger\";\n\n  const position = url.lastIndexOf(search);\n\n  if (position > 0) {\n    url = url.substr(0, position) +\n      replace +\n      url.substr(position + search.length);\n  }\n\n  return url;\n};\n\nconst getUser = (screenName: string, timestamp: number, uniqueID: string, queue: any): Promise<any> => {\n  return cbCall(\"users_show\", {\n    screen_name: screenName,\n  }).then((result) => {\n\n    const errorAnalysis = cbErrorHandling(result);\n\n    if (errorAnalysis === \"again\") {\n      queue.call(config.service_key + \"--getUser\", [\n        screenName,\n      ], timestamp, uniqueID);\n\n      return Promise.resolve();\n    } else if ( errorAnalysis === \"auth\") {\n      console.log(\"AAAAHHHHH auth me!\");\n    } else {\n\n      return cfData.get(`s--${config.service_key}--nw--${screenName}`, {})\n        .then((networkObject) => {\n          const nUuid = uniqueID;\n          networkObject[nUuid] = {\n            callCount: null,\n            completeCount: 0,\n            date: Date.now(),\n            lastUpdated: Date.now(),\n            screenName,\n            state: \"queuing\",\n          };\n          return cfData.set(`s--${config.service_key}--nw--${screenName}`, networkObject)\n            .then(() => {\n              return cfData.set(`s--${config.service_key}--a--${screenName}-${nUuid}--c`, {\n                followers_count: result.reply.followers_count,\n                friends_count: result.reply.friends_count,\n                handle: screenName,\n                id: result.reply.id_str,\n                image: getBiggerPicture(result.reply.profile_image_url_https),\n                name: result.reply.name,\n              });\n            })\n            .then(() => {\n              queue.call(config.service_key + \"--getFriendsIds\", [screenName, undefined, screenName, nUuid, -1],\n                    timestamp, uniqueID);\n              // queue.call(\"getFollowersIds\", [screenName, true, nUuid, -1]);\n              return Promise.resolve();\n            });\n        });\n    }\n  });\n};\n\n// The web extension does not support the scraping of protected accounts\n// This is implemented on privacy purpose to protect such accounts\nconst scrapeAble = (screenName: string, userId: string, centralNode: string, nUuid: string): Promise<boolean> => {\n  return cfData.get(`s--${config.service_key}--a--${centralNode}-${nUuid}--n`, {})\n    .then((nodes) => {\n      if (userId in nodes && !nodes[userId].protected) {\n        return true;\n      } else {\n        return false;\n      }\n    });\n};\n\nconst getFriendsIds = (  screenName: string, userId: string, centralNode: string,\n                         nUuid: string, cursor: string,\n                         timestamp: number, uniqueID: string, queue: any): Promise<any> => {\n\n  // Check if this user is scrape-able\n  return scrapeAble(screenName, userId, centralNode, nUuid)\n    .then((isScrapeAble) => {\n\n      if (!isScrapeAble && screenName !== centralNode) {\n\n        return Promise.resolve();\n\n      } else {\n\n        const params = {\n          count: 5000,\n          cursor,\n          stringify_ids: true,\n        };\n\n        if (userId === null || userId === undefined || !userId) {\n          Object.assign(params, {screen_name: screenName});\n        } else {\n          Object.assign(params, {user_id: userId});\n        }\n\n        return cbCall(\"friends_ids\", params).then((result) => {\n\n          console.log(\"friends_ids\", result);\n\n          const errorAnalysis = cbErrorHandling(result);\n\n          if (errorAnalysis === \"again\") {\n            queue.call(config.service_key + \"--getFriendsIds\", [\n              screenName, userId, centralNode,\n              nUuid, cursor,\n            ], timestamp, uniqueID);\n\n            return Promise.resolve();\n          } else if ( errorAnalysis === \"auth\") {\n            console.log(\"AAAAHHHHH auth me!\");\n          } else {\n\n            if (result.reply.ids === null) {\n\n              console.log(\"ids === null\", result);\n\n              // So far not able to figure\n              queue.call(config.service_key + \"--getFriendsIds\", [\n                screenName, userId, centralNode,\n                nUuid, cursor,\n              ], timestamp, uniqueID);\n\n              return Promise.resolve();\n            } else {\n\n              return cfData.get(`s--${config.service_key}--a--${centralNode}-${nUuid}--n`, {})\n                .then((nodes) => {\n                  if (screenName === centralNode) {\n                    const newNodes = {};\n                    result.reply.ids.forEach( (id) => {\n                      newNodes[id] = {\n                        followers: [],\n                        followers_count: 0,\n                        friends: [],\n                        friends_count: 0,\n                        handle: null,\n                        image: null,\n                        name: null,\n                      };\n                    });\n\n                    Object.assign(nodes, newNodes);\n                  } else {\n                    // make sure we don't have duplicates in here...\n                    result.reply.ids.forEach((newNode) => {\n                      if (nodes[userId].friends.indexOf(newNode) === -1) {\n                        nodes[userId].friends.push(newNode);\n                      }\n                    });\n                  }\n                  return cfData.set(`s--${config.service_key}--a--${centralNode}-${nUuid}--n`, nodes);\n                })\n                .then((savedData) => {\n                  if (result.reply.next_cursor_str && result.reply.next_cursor_str !== \"0\"\n                      && result.reply.next_cursor_str !== 0\n                      // LIMIT the number of friends of friends to 20.000\n                      // TODO: move to configs\n                      && savedData[userId].friends.length < 20000) {\n\n                    queue.call(config.service_key + \"--getFriendsIds\", [\n                      screenName, userId, centralNode,\n                      nUuid, result.reply.next_cursor_str,\n                    ], timestamp, uniqueID);\n\n                    return Promise.resolve();\n                  } else {\n                    queue.call(\"network--estimateCompletion\", [config.service_key, centralNode, nUuid],\n                      timestamp, uniqueID);\n\n                    if (centralNode === screenName) {\n                      queue.call(config.service_key + \"--getFriends\", [screenName, userId, centralNode, nUuid, -1],\n                            timestamp, uniqueID);\n                      return cfData.get(`s--${config.service_key}--a--${centralNode}-${nUuid}--n`, {})\n                        .then((nodes) => {\n                          Object.keys(nodes).forEach((id) => {\n                            queue.call(config.service_key + \"--getFriendsIds\", [undefined, id, centralNode, nUuid, -1],\n                                  timestamp, uniqueID);\n                          });\n                          return Promise.resolve();\n                        });\n                    } else {\n                      return Promise.resolve();\n                    }\n                  }\n                });\n            }\n          }\n        });\n\n      }\n\n    });\n};\n\nconst getFriends = (  screenName: string, userId: string, centralNode: string,\n                      nUuid: string, cursor: string,\n                      timestamp: number, uniqueID: string, queue: any): Promise<any> => {\n\n  // Check if this user is scrape-able\n  return scrapeAble(screenName, userId, centralNode, nUuid)\n    .then((isScrapeAble) => {\n\n      if (!isScrapeAble && screenName !== centralNode) {\n\n        return Promise.resolve();\n\n      } else {\n\n        const params = {\n          count: 200,\n          cursor,\n          include_user_entities: false,\n          skip_status: true,\n        };\n\n        if (userId === null || userId === undefined || !userId) {\n          Object.assign(params, {screen_name: screenName});\n        } else {\n          Object.assign(params, {user_id: userId});\n        }\n\n        return cbCall(\"friends_list\", params).then((result) => {\n\n          console.log(\"friends_list\", result);\n\n          const errorAnalysis = cbErrorHandling(result);\n\n          if (errorAnalysis === \"again\") {\n            queue.call(config.service_key + \"--getFriends\", [\n              screenName, userId, centralNode,\n              nUuid, cursor,\n            ], timestamp, uniqueID);\n            return Promise.resolve();\n          } else if ( errorAnalysis === \"auth\") {\n            console.log(\"AAAAHHHHH auth me!\");\n          } else {\n\n            console.log(result);\n\n            return cfData.get(`s--${config.service_key}--a--${centralNode}-${nUuid}--n`, {})\n              .then((nodes) => {\n\n                result.reply.users.forEach((user) => {\n                  if (user.id_str  in nodes) {\n                    nodes[user.id_str].name = user.name;\n                    nodes[user.id_str].handle = user.screen_name;\n                    nodes[user.id_str].followers_count = user.followers_count;\n                    nodes[user.id_str].friends_count = user.friends_count;\n                    nodes[user.id_str].handle = user.screen_name;\n                    nodes[user.id_str].image = getBiggerPicture(user.profile_image_url_https);\n                    nodes[user.id_str].protected = user.protected;\n                  }\n                });\n\n                return cfData.set(`s--${config.service_key}--a--${centralNode}-${nUuid}--n`, nodes);\n\n              })\n              .then(() => {\n                if (result.reply.next_cursor_str && result.reply.next_cursor_str !== \"0\"\n                    && result.reply.next_cursor_str !== 0) {\n                  queue.call(config.service_key + \"--getFriends\",\n                     [screenName, userId, centralNode, nUuid, result.reply.next_cursor_str],\n                     timestamp, uniqueID);\n                } else {\n                  queue.call(\"network--estimateCompletion\", [config.service_key, centralNode, nUuid]);\n                }\n                return Promise.resolve();\n              });\n          }\n        });\n      }\n    });\n};\n\nconst getUsers = (  centralNode: string, nUuid: string,\n                    timestamp: number, uniqueID: string, queue: any): Promise<any> => {\n\n  return Promise.all([\n    cfData.get(`s--${config.service_key}--a--${centralNode}-${nUuid}--nw`, {proxyKeys: []}),\n    cfData.get(`s--${config.service_key}--a--${centralNode}-${nUuid}--n`, {}),\n  ]).then((data) => {\n    const query = [];\n    const limit = 100;\n    let more = false;\n\n    // TODO: this should be relative to the overall size of the core-network\n    const proxySizeLimit = 5;\n\n    Object.keys(data[0].proxyKeys).forEach((proxy) => {\n      if (!(proxy in data[1]) && data[0].proxies[data[0].proxyKeys[proxy]][5] > proxySizeLimit) {\n        if (query.length < limit) {\n          query.push(proxy);\n        } else {\n          more = true;\n        }\n      }\n    });\n\n    if (query.length > 0) {\n      const params = {\n        user_id: query.join(\",\"),\n      };\n\n      return cbCall(\"users_lookup\", params).then((result) => {\n\n        console.log(\"users_lookup\", result);\n\n        const errorAnalysis = cbErrorHandling(result);\n\n        if (errorAnalysis === \"again\") {\n          queue.call(config.service_key + \"--getUsers\", [\n            centralNode, nUuid,\n          ], timestamp, uniqueID);\n          return Promise.resolve();\n        } else if ( errorAnalysis === \"auth\") {\n          console.log(\"AAAAHHHHH auth me!\");\n        } else {\n\n          result.reply.forEach((user) => {\n            if (! (user.id_str in data[1])) {\n              data[1][user.id_str] = {};\n            }\n\n            data[1][user.id_str].name = user.name;\n            data[1][user.id_str].followers_count = user.followers_count;\n            data[1][user.id_str].friends_count = user.friends_count;\n            data[1][user.id_str].handle = user.screen_name;\n            data[1][user.id_str].image = getBiggerPicture(user.profile_image_url_https);\n            data[1][user.id_str].protected = user.protected;\n          });\n\n          // Some IDs will not return any results, because they are protected\n          query.forEach((proxyId) => {\n            if (! (proxyId in data[1])) {\n              data[1][proxyId] = {};\n            }\n          });\n\n          return cfData.set(`s--${config.service_key}--a--${centralNode}-${nUuid}--n`, data[1])\n            .then((savedData) => {\n              if (more && queue) {\n\n                queue.call(config.service_key + \"--getUsers\",\n                   [centralNode, nUuid],\n                   timestamp, uniqueID);\n\n              } else {\n\n                queue.call(\"network--cleanupNetwork\",\n                   [config.service_key, centralNode, nUuid],\n                   timestamp, uniqueID);\n\n                Promise.resolve();\n              }\n            });\n        }\n      });\n\n    } else {\n      queue.call(\"network--cleanupNetwork\",\n        [config.service_key, centralNode, nUuid],\n        timestamp, uniqueID);\n\n      return Promise.resolve();\n    }\n\n  });\n};\n\n// TODO: Is this still being used??\nconst removeNetwork = (centralNode: string, nUuid: string): Promise<any> => {\n  return cfData.get(`s--${config.service_key}--nw--${centralNode}`)\n    .then((networkData) => {\n      delete networkData[nUuid];\n      return cfData.set(`s--${config.service_key}--nw--${centralNode}`, networkData)\n        .then(() => {\n          return Promise.all([\n              cfData.remove(`s--${config.service_key}--a--${centralNode}-${nUuid}--c`),\n              cfData.remove(`s--${config.service_key}--a--${centralNode}-${nUuid}--n`),\n            ]);\n        });\n    });\n};\n\nexport { auth, authRequired, config, createOptions, getFriends, getFriendsIds, getUser, getUsers, removeNetwork };\n","import * as cfData from \"@crossfoam/data\";\nimport * as cfTwitter from \"@crossfoam/service-twitter\";\n\nconst services = {\n  [cfTwitter.config.service_key]: cfTwitter,\n};\n\nconst identifyService = (url: string): [string, string] => {\n  let found = null;\n\n  Object.keys(services).forEach((service) => {\n    const match = url.match(services[service].config.regex);\n    if (match !== null) {\n      found = [service, match[1]];\n    }\n  });\n\n  return found;\n};\n\nconst getScrapes = (): Promise<any> => {\n  return Promise.all(\n    Object.keys(services).map(\n      (service) => cfData.get(`s--${service}--u`, []),\n    ),\n  )\n  .then((screenNamesList) => {\n    return Promise.all(\n      screenNamesList.map(\n        (screenNames, i) => Promise.all(\n          screenNames.map(\n            (screenName) => cfData.get(`s--${Object.keys(services)[i]}--nw--${screenName}`, {}),\n          ),\n        ),\n      ),\n    )\n    .then((networkDatas) => {\n\n      const scrapes = [];\n\n      networkDatas.forEach((networkData, serviceID) => {\n        networkData.forEach((screenNameNetworkData, screenNameID) => {\n          Object.keys(screenNameNetworkData).forEach((scrapeID) => {\n            scrapes.push({\n              callCount: screenNameNetworkData[scrapeID].callCount,\n              completeCount: screenNameNetworkData[scrapeID].completeCount,\n              completed: screenNameNetworkData[scrapeID].completed,\n              date: screenNameNetworkData[scrapeID].date,\n              nUuid: scrapeID,\n              screenName: screenNamesList[serviceID][screenNameID],\n              service: Object.keys(services)[serviceID],\n            });\n          });\n        });\n      });\n\n      return scrapes;\n\n    });\n  });\n};\n\nexport { services, identifyService, getScrapes };\n","const throttle = (t: number) => {\n  return new Promise((resolve) => {\n      setTimeout(resolve, t);\n  });\n};\n\n// inspired by uuid v4 (shortened) https://stackoverflow.com/questions/105034/create-guid-uuid-in-javascript\n\n/* tslint:disable:no-bitwise */\nconst uuid = (): string => {\n  return \"xxxxxxxx\".replace(/[xy]/g, (c) => {\n    const r = Math.random() * 16 | 0;\n    const v = c === \"x\" ? r : (r & 0x3 | 0x8);\n    return v.toString(16);\n  });\n};\n/* tslint:enable:no-bitwise */\n\nconst formatDate = (date: Date, withTime: boolean = false) => {\n  // TODO: Language based formatting of dates\n  const lang: string = \"en\";\n  switch (lang) {\n    case \"de\":\n      return dateNull(date.getDate())\n        + \".\" + dateNull((date.getMonth() + 1))\n        + \".\" + dateNull(date.getFullYear())\n        + ((withTime) ? \" \" + dateNull(date.getHours()) + \":\" + dateNull(date.getMinutes()) : \"\");\n      break;\n    default:\n      return dateNull(date.getFullYear())\n        + \"/\" + dateNull((date.getMonth() + 1))\n        + \"/\" + dateNull(date.getDate())\n        + ((withTime) ? \" \" + dateNull(date.getHours()) + \":\" + dateNull(date.getMinutes()) : \"\");\n      break;\n  }\n};\n\nconst dateNull = (num: number): string => {\n  return (num < 10) ? \"0\" + num : \"\" + num;\n};\n\nconst cleanNumber = (duration: number) => {\n  if (duration === Math.floor(duration)) {\n    return duration;\n  } else if ( parseFloat(duration.toFixed(1)) === parseFloat(duration.toFixed(2))) {\n    return duration.toFixed(1);\n  } else {\n    return duration.toFixed(2);\n  }\n};\n\nconst formatDuration = (duration: number) => {\n  duration = duration / 1000;\n  if (duration < 60) {\n    return Math.floor(duration) +\n      \" \" + browser.i18n.getMessage(\"secondsShort\");\n  } else {\n    duration = duration / 60;\n    if (duration < 60) {\n      return cleanNumber(duration) +\n        \" \" + browser.i18n.getMessage(\"minutesShort\");\n    } else {\n      duration = duration / 60;\n      if (duration < 24) {\n        return cleanNumber(duration) +\n          \" \" + browser.i18n.getMessage(\"hoursShort\");\n      } else {\n        duration = duration / 24;\n        return cleanNumber(duration) +\n          \" \" + browser.i18n.getMessage(\"daysShort\");\n      }\n    }\n  }\n};\n\nconst objEmpty = (obj) => {\n    for (const key in obj) {\n        if (obj.hasOwnProperty(key)) {\n          return false;\n        }\n    }\n    return true;\n};\n\nconst downloadFile = (fileData: string, fileType: string,\n                      fileName: string): Promise<any> => {\n\n  const file = new Blob([fileData], {\n    type: fileType,\n  });\n\n  return browser.downloads.download({\n      // window.URL ??\n      filename: fileName,\n      saveAs: true,\n      url: URL.createObjectURL(file),\n    }).then((downloadId) => {\n      return Promise.resolve();\n    }).catch((error) => {\n      throw new Error(\"Download failed. \" + JSON.stringify(error));\n    });\n};\n\nconst debounce = ( func: (...args: any[]) => void,\n                   wait: number = 200,\n                   immediate: boolean = false,\n): (...args: any[]) => void => {\n\n  let timeout = null;\n  let again = false;\n\n  return (...args: any[]) => {\n    const callNow = immediate && timeout === null;\n    const next = () => func.apply( null , args );\n\n    if (timeout === null) {\n      timeout = setTimeout( () => {\n        timeout = null;\n        if ( again ) {\n          next();\n          again = false;\n        }\n      }, wait );\n    } else {\n      again = true;\n    }\n\n    if (callNow) {\n      next();\n    }\n  };\n};\n\nexport {debounce, downloadFile, formatDate, formatDuration, objEmpty, throttle, uuid};\n","import { services } from \"@crossfoam/services\";\n\nObject.keys(services).forEach((serviceKey) => {\n\n    document.getElementById(\"options--services\").innerHTML = `<div class='services--service-container'>\\\n        <h3>${services[serviceKey].config.service_name}</h3>\\\n        <div id='services--service-${serviceKey}'></div>`;\n\n    services[serviceKey].createOptions(document.getElementById(`services--service-${serviceKey}`));\n\n});\n"],"sourceRoot":""}